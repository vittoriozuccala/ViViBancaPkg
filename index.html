<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Pacchetto per le funzioni ViViBanca S.p.A.">
<title>Pacchetto di lavoro per basi dati ViViBanca S.p.A. • ViViBancaPkg</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Pacchetto di lavoro per basi dati ViViBanca S.p.A.">
<meta property="og:description" content="Pacchetto per le funzioni ViViBanca S.p.A.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">ViViBancaPkg</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="vivibancapkg">ViViBancaPkg<a class="anchor" aria-label="anchor" href="#vivibancapkg"></a>
</h1></div>
<p>Questo pacchetto contiene le funzioni utili agli utenti che lavorano con R in <a href="https://www.vivibanca.it/" class="external-link">ViViBanca S.p.A.</a>.</p>
<p>E’ possibile avere maggiori informazioni sul <a href="https://github.com/vittoriozuccala/ViViBancaPkg" class="external-link">sito Github del progetto</a></p>
</div>
<div class="section level1">
<h1 id="funzioni-contenute">Funzioni contenute<a class="anchor" aria-label="anchor" href="#funzioni-contenute"></a>
</h1>
<p>Le funzioni contenute nel file sono:</p>
<ul>
<li>Funzioni di utilità generale:
<ul>
<li>
<strong>leggi_configurazione</strong>: legge una configurazione <em>YAML</em>
</li>
<li>
<strong>accorpa_AAMMGG</strong>: serve per accorpare anno mese giorno in un unico campo</li>
<li><strong>definisci_data</strong></li>
<li><strong>riprogramma_testo</strong></li>
</ul>
</li>
<li>Funzioni legate ad AS400:
<ul>
<li><strong>connessione_as400</strong></li>
<li><strong>estrai_tabella_customer_satisfaction</strong></li>
<li><strong>estrai_tabella_geuty400</strong></li>
<li><strong>estrai_tabella_reclami</strong></li>
</ul>
</li>
</ul>
<p>Mentre le funzioni di utilità generale sono funzioni che possono essere utilizzate in differenti contesti anche non per forza associate ai database</p>
<div class="section level2">
<h2 id="leggi_configurazione">leggi_configurazione<a class="anchor" aria-label="anchor" href="#leggi_configurazione"></a>
</h2>
<p>La prima funzione permette di leggere un file di configurazione in formato <strong>YAML</strong>. Ovviamente richiede l’apposito pacchetto</p>
<pre><code><span><span class="va">cnf</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/leggi_configurazione.html">leggi_configurazione</a></span><span class="op">(</span><span class="st">"file_config.txt"</span><span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level1">
<h1 id="vivibancapkg-1">ViViBancaPkg<a class="anchor" aria-label="anchor" href="#vivibancapkg-1"></a>
</h1>
<p>Questo pacchetto contiene le funzioni utili agli utenti che lavorano con R in <a href="https://www.vivibanca.it/" class="external-link">ViViBanca S.p.A.</a>.</p>
<p>E’ possibile avere maggiori informazioni sul <a href="https://vittoriozuccala.github.io/ViViBancaPkg/" class="external-link">sito Github del progetto</a></p>
<div class="section level2">
<h2 id="procedura">Procedura<a class="anchor" aria-label="anchor" href="#procedura"></a>
</h2>
<p>La procedura su come creare un pacchetto in R l’ho estratta dal sito <a href="https://ourcodingclub.github.io/tutorials/writing-r-package/#:~:text=To%20get%20started%20on%20a,with%20the%20New%20Directory%20option." class="external-link">Ourcodingclub</a></p>
<p>La prima cosa da fare è scrivere le funzioni in un apposito file da inserire nella cartella <strong>R</strong> del progetto. Dopo aver scritto il codice su un <em>file.R</em> è necessario generare la documentazione con <strong>roxygen</strong> che permette al sistema anche di riconoscere quali funzioni sono presenti nel pacchetto:</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>            <span class="co"># Assicurati che la cartella sia quella del pacchetto</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://roxygen2.r-lib.org/" class="external-link">roxygen2</a></span><span class="op">)</span>; <span class="co"># Carica il pacchetto roxygen2</span></span>
<span><span class="fu"><a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link">roxygenise</a></span><span class="op">(</span><span class="op">)</span>;      <span class="co"># Costruisce gli help files</span></span></code></pre>
<p>A questo punto è necessario caricarlo sul progetto <em>Github</em>:</p>
<pre><code>git add .
git commit -m "Commento"
git push --all
</code></pre>
<p>Per poter utilizzare un pacchetto è necessario caricarlo in maniera forzata:</p>
<pre><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span> <span class="co"># Make sure that the devtools library is loaded</span></span>
<span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"vittoriozuccala/ViViBancaPkg"</span>, force <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>;</span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://vittoriozuccala.github.io/ViViBancaPkg/" class="external-link">ViViBancaPkg</a></span><span class="op">)</span></span></code></pre>
<p>Può capitate che il pacchetto non venga caricato perchè già in memoria. In questi casi bisogna farne l’unload:</p>
<p><code>detach("package:ViViBancaPkg",unload = T)</code></p>
<p>Il primo file di configurazione è stato messo in una determinata cartella che ripropongo nel seguente esempio:</p>
<pre><code><span><span class="va">cnf</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/leggi_configurazione.html">leggi_configurazione</a></span><span class="op">(</span><span class="st">"C:\\Users\\mdusr00052\\OneDrive\\R Environment\\Lavoro\\ElaborazioniAS400\\configurazione.txt"</span><span class="op">)</span>  </span></code></pre>
</div>
<div class="section level2">
<h2 id="il-sistema-di-cartelle">Il sistema di cartelle<a class="anchor" aria-label="anchor" href="#il-sistema-di-cartelle"></a>
</h2>
<p>Il sistema di cartelle in un <em>pacchetto R</em> è variegato. Nella cartella del progetto è necessario avere sicuramente:</p>
<ul>
<li>
<strong>R</strong>: dove saranno posizionati i vari files in R</li>
<li>
<strong>man</strong>: viene generata in forma automatica da <em>roxygen2</em> dopo alla creazione della documentazione</li>
</ul>
<p>Ci sono poi altre cartelle che possono essere necessarie al progetto:</p>
<ul>
<li>
<strong>data</strong>: contiene tutti gli eventuali data-files necessari al corretto funzionamento del pacchetto R. Questi files sono salvati in <em>formato .rda</em> utilizzando la funzione <em>save()</em> in R e possono essere caricati dal pacchetto come succede, ad esempio a <em>data(mtcars)</em> nel pacchetto <em>base</em> di R.</li>
<li>
<strong>docs</strong>: include documenti per un eventuale sito da configurare su <em>GitHub</em> come quello di <a href="https://vittoriozuccala.github.io/ViViBancaPkg/" class="external-link">questo progetto</a>. Personalmente ho utilizzato <a href="https://pkgdown.r-lib.org/articles/pkgdown.html" class="external-link">pgkdown</a>
</li>
<li>src contains compiled code that is used by your R functions. This could include code written in C or C++ to speed up computations. In some packages, most of the code is actually in this folder.</li>
<li>tests includes files to test your code to ensure that it is running properly throughout the development process. This folder can be created using the testthat R package. For large projects, especially, this is extremely useful because it allows you to quickly test to make sure that all of the functions that you write return the output that you expect of them.</li>
<li>vignettes includes larger documentation files for your code – more like a package guide than a simple help file for package functions. <a href="https://confoobio.github.io/gmse/articles/SI1.html" class="external-link">Here is an example from GMSE</a>.</li>
</ul>
<p>We can build a source package (i.e., a zipped version of the R package) in Rstudio by selecting Build &gt; Build Source Package. This will create a zipped package outside of the package directory, which would be what we would need to build if we wanted to submit our package to CRAN.</p>
</div>
</div>

  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>Copyright ViViBanca S.p.A. 2022</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing ViViBancaPkg</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Vittorio Zuccala' <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Vittorio Zuccala’.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
